<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTFâ€‘8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Enrichment Form</title>
  <link rel="stylesheet" href="styles.css">

  <!-- Load Apollo inbound script and initialize form enrichment -->
  <script>
    (function () {
      var nocache = Math.random().toString(36).substring(7);
      var script = document.createElement('script');
      script.src = 'https://assets.apollo.io/js/apollo-inbound.js?nocache=' + nocache;
      script.defer = true;
      script.onload = function () {
        window.ApolloInbound?.formEnrichment?.init({
          appId: '68e5d16e61846e00214fa17b' // replace with your actual appId
        });
      };
      document.head.appendChild(script);
    })();

    // Restore the preferred theme (light or dark) from localStorage on load
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark');
      }
    });
  </script>
</head>
<body>
  <!-- Theme toggle button -->
  <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
    ðŸŒ“
  </button>

  <!-- Centered content container -->
  <div class="content">
    <h1>Apollo Contact Form</h1>
    <p>Please fill out the form below.</p>

    <!-- Contact form -->
    <div class="form-box">
      <form id="contact-form" name="contact" onsubmit="submitToApollo(event)">
        <p>
          <label>
            Email (required):<br>
            <input type="email" name="email" required />
          </label>
        </p>

        <p>
          <label>
            Name:<br>
            <input type="text" name="name" />
          </label>
        </p>

        <p>
          <label>
            Company:<br>
            <input type="text" name="company" />
          </label>
        </p>

        <p>
          <label>
            Company Size:<br>
            <input type="text" name="company_size" />
          </label>
        </p>

        <p>
          <button type="submit">Submit</button>
        </p>
      </form>
    </div>
  </div>

  <script>
    // Theme toggling logic
    function toggleTheme() {
      document.documentElement.classList.toggle('dark');
      const isDark = document.documentElement.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    // Submit form data to Apollo
    function submitToApollo(event) {
      event.preventDefault();

      // Collect data from the form inputs
      const data = {
        email: document.querySelector('input[name="email"]').value,
        name: document.querySelector('input[name="name"]').value,
        company: document.querySelector('input[name="company"]').value,
        company_size: document.querySelector('input[name="company_size"]').value
      };

      // Use ApolloInbound's submitForm API to send data to Apollo
      window.ApolloInbound?.submitForm(data, {
        onSuccess: function () {
          console.log('Submission sent to Apollo successfully.');
          // Optional: add custom success logic here
        },
        onError: function (error) {
          console.error('Error sending submission to Apollo:', error);
          // Optional: add custom error handling here
        }
      });
    }
  </script>
</body>
</html>

